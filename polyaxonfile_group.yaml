version: 1

kind: group

hptuning:
  concurrency: 10
  random_search:
    n_experiments: 50
    
  matrix:
    lr:
      range: 0.04:0.12:0.02
    epochs:
      range: 500:900:50

build:
  image: gw000/keras
  build_steps:
    - pip install polyaxon-client
    - pip install pandas
    - pip install scikit-learn
    - pip install keras
    - pip install tensorflow
    
run:
  cmd: python model.py --learning_rate={{ lr }} --batch_size={{ 128 }} --dropout={{ 0.2 }} --num_epochs={{ epochs }}